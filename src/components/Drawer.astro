---
import { LINKS_AUTHENTICATED, LINKS_ADMIN } from "@/consts";
import { cn } from "@/lib/utils";
import { useUser } from "@/lib/useUser";
// Import Paraglide messages
import { prompts, contact, about, projects, blog } from "../paraglide/messages";

// Map the link text to the corresponding message function
const linkTextMap = {
  Prompts: prompts,
  Contact: contact,
  About: about,
  Projects: projects,
  Blog: blog,
};

// Get user if available
const user = Astro.locals.user;
---

<div
  id="drawer"
  class="fixed top-14 -left-full z-40 h-[calc(100vh-3.5rem)] w-full overflow-y-auto bg-white p-4 transition-all duration-300 ease-in-out md:w-80 dark:bg-neutral-900"
>
  <nav class="flex flex-col gap-2">
    {
      user &&
        LINKS_AUTHENTICATED.map((link) => (
          <a
            href={link.HREF}
            class={cn(
              "flex items-center gap-2 rounded-md p-2",
              "text-current hover:bg-black/5 dark:hover:bg-white/20",
              "transition-colors duration-300 ease-in-out",
            )}
          >
            {linkTextMap[link.TEXT] ? linkTextMap[link.TEXT]() : link.TEXT}
          </a>
        ))
    }
    {
      LINKS_ADMIN.map((link) => (
        <a
          href={link.HREF}
          class={cn(
            "flex items-center gap-2 rounded-md p-2",
            "text-current hover:bg-black/5 dark:hover:bg-white/20",
            "transition-colors duration-300 ease-in-out",
          )}
        >
          {linkTextMap[link.TEXT] ? linkTextMap[link.TEXT]() : link.TEXT}
        </a>
      ))
    }
  </nav>
</div>
